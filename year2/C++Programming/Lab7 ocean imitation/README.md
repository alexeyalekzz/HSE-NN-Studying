# Lab-7

## Лабораторный практикум №7 (Ocean)

![GitHub pull requests](https://img.shields.io/github/issues-pr/HSE-CS/tp-lab-7)
![GitHub closed pull requests](https://img.shields.io/github/issues-pr-closed/HSE-CS/tp-lab-7)

![Relative date](https://img.shields.io/date/1616792399)

### Задание

Разработать систему имитационного моделирования "Океан". Моделируется замкнутая экологическая система по принципу хищник-жертва.

**Имитационное** моделирование в данном случае предполагает, что мы не используем математические модели, формулы, а получаем результаты моделирования на основе случайного взаимодействия объектов в океане.

В системе рассматриваются сущности:

- **Ocean** - двумерная матрица ячеек.
- **Cell** - ячейка океана, которая может быть либо пустой, либо содержать объект.
- **Object** - объект, который может занимать ячейку океана.
- **Stone** - неподвижный объект океана, просто занимающий ячейку.
- **Prey** - рыба-жертва. Передвигается случайным образом по океану, размножается и умирает через заданные промежутки времени.
- **Predator** - рыба-хищник. Передвигается по океану, поедает рыбу-жертву, размножается. Может умереть от голода.

Наша программная модель предполагает, что в систему могут вводиться новые сущности, в том числе основанные на существующих (супер-хищник и т.д.)

### Этапы 

На начальном этапе необходимо разработать классы для основных сущностей. Океан выступает контейнером для ячеек, ячейка является контейнером для объектов. Все объекты объединяются в коллекцию (вектор или список) и океан управляет всеми объектами через цикл (подобно управлению работниками в предыдущей лабораторной работе). Океан посылает всем объектам сообщение **live()**, и каждый объект ведет себя в соответствии с заданным алгоритмом.

Рассылка сообщений должна производиться именно по списку, а не по позиции ячейки в океане. Это гарантирует независимость порядка порядка поступления сообщения от позиции в океане. 

В результате "жизнедеятельности" объектов в океане происходят следующие события:

- живые объекты хаотично перемещаются в соседние ячейки;
- живые объекты размножаются, питаются и умирают;

Моделирование продолжается до тех пор, пока:

- пользователь не прерывает процесс;
- в океане заканчивается пища - объекты **Prey**;
- в океане заканчиваются хищники - объекты **Predators**;

### Краткое описание живых объектов

#### Prey

Низшее звено пищевой цепочки. Живет заданное количество итераций. Выполняет свободные перемещения по океану с шагом 1 ячейка. Размножается через определенный период времени.

#### Predator

Хищник - высшее звено пищевой цепи. Наследует поведение **Prey**, но может умирать от голода и охотиться на добычу. Может размножаться только в сытом состоянии.

### Результаты моделирования

В начале в океан загружаются параметры всех объектов и случайным образом помещаются объекты (количество указывается в параметрах). После этого включается основной цикл и далее возможны три исхода:

- Смерть хищников. Добыча заполняет все доступное пространство океана.
- Смерть добычи. Хищники размножаются, но потом неизбежно умирают с голода. Океан пустеет.
- Колебания численности. Число хищников и жертв колеблется по гармоническому закону. Это самый предпочтительный вариант.


### Консольная версия

Каждый объект в океане отображается на экране определенным символом. Моделирование предполагает случайное распределение в океане заданного количества камней, жерт и хищников (начальное состояние) и пошаговое изменение состояния океана. Все объекты в течении шага делают свой ход. После этого на экран выводится карта океана и процесс зацикливается.

<img src="img/ocean.png">

На приведенном скриншоте показана i-ая итерация океана. Жерты обозначены символом 'f', хищники - 'S'. Видно, что количество жертв существенно больше числа хищников, что создает для последних благоприятные условия для питания и размножения. На экране отображается порядка 5000 объектов.

### Некоторые варианты реализации

Приведем в качестве примера несколько неполных реализаций классов проекта.

Океан:

```c++
#ifndef _OCEAN_H_
#define _OCEAN_H_

#include "common.h"
#include "Cell.h"
#include <list>

class Ocean
{
	
private:
	Cell **cells;
	std::list<Object*> stuff;

public:
	Ocean();
	~Ocean();
	void print() const;
	void addObjects(...);
	void run();
};
#endif
```

Объект:

```c++
#ifndef _OBJECT_H_
#define _OBJECT_H_

#include "common.h"

#define STONE_N '#'
#define CORAL_N '*'
#define PREY_N 'f'
#define PREDATOR_N 'S'

enum class ObjType {STONE,CORAL,PREY,PREDATOR};

class Cell;
class Object
{
protected:
	Cell *cell;
public:
	Object(Cell * = nullptr);
	virtual ~Object();
	virtual void live() = 0; // жизнь объекта
	void setCell(Cell*);
};
#endif
```

Ячейка:

```c++
#ifndef _CELL_H_
#define _CELL_H_

#include "common.h"
#include "Object.h"

class Ocean;

class Cell
{
	friend Ocean;
private:
	Pair crd;
	Object *obj;
	Ocean *ocean;
public:
	explicit Cell(Pair p = { 0, 0 }, Ocean* oc = nullptr) :
		crd(p),
		obj(nullptr),
		ocean(oc) {}
	void init(Pair p, Ocean* oc);
	Object* getObject() const;
	void setObject(Object*);
	void killMe();

};
#endif
```

Файл с общими настройками:

```c++
#ifndef _COMMON_H_
#define _COMMON_H_

typedef size_t coord_t;

struct Pair
{
	coord_t x; // 0..M-1
	coord_t y; // 0..N-1
};

const size_t N = 20;
const size_t M = 50;

#endif
```

## Состав проекта

- **common.h** - общие макросы, заголовки глобальных функций
- **cell.h,cell.cpp** - класс **Cell** - ячейка
- **stone.h,stone.cpp** - класс **Stone** - скала
- **prey.h,prey.cpp** - класс **Prey** - жертва
- **predator.h,predator.cpp** - класс **Predator** - хищник
- **ocean.h,ocean.cpp** - класс **Ocean** - океан
- **main.cpp** - создание и запуск океана
- **img/screenshot.png** - скриншот главного окна океана

 
## Список участников/веток

1. Бакурский    Андрей  Сергеевич   19 ПИ-1 b1
1. Балаян   Роман   Каренович   19 ПИ-1 b2
1. Бекина   Светлана    Сергеевна   19 ПИ-2 b3
1. Боряев   Сергей  Сергеевич   19 ПИ-1 b4
1. Бурцев   Роман   Андреевич   19 ПИ-1 b5
1. Варгин   Дмитрий Александрович   19 ПИ-1 b6
1. Вотинова Ксения  Константиновна  19 ПИ-1 b7
1. Герасимов    Алексей Александрович   19 ПИ-1 b8
1. Грачев   Александр   Евгеньевич  19 ПИ-1 b9
1. Долгополов   Алексей Геннадьевич 19 ПИ-1 b10
1. Думаревская  Татьяна Николаевна  19 ПИ-2 b11
1. Емшанов  Павел   Андреевич   19 ПИ-1 b12
1. Игумнова Наталья Дмитриевна  19 ПИ-2 b13
1. Климов   Алексей Сергеевич   19 ПИ-1 b14
1. Лукичева Полина  Александровна   19 ПИ-1 b15
1. Лупехина Людмила Евгеньевна  19 ПИ-1 b16
1. Макаров  Вадим   Дмитриевич  19 ПИ-1 b17
1. Мурзинов Михаил  Денисович   19 ПИ-1 b18
1. Николаева    Олеся   Игоревна    19 ПИ-1 b19
1. Османов  Ислам   Рамилевич   19 ПИ-1 b20
1. Павлова  Дарья   Андреевна   19 ПИ-1 b21
1. Сапожников   Андрей  Михайлович  19 ПИ-1 b22
1. Сафронов Иван    Дмитриевич  19 ПИ-1 b23
1. Смирнов  Григорий    Андреевич   19 ПИ-1 b24
1. Стоянов  Станислав   Степанович  19 ПИ-1 b25
1. Трухин   Егор    Сергеевич   19 ПИ-1 b26
1. Ускова   Елена   Максимовна  19 ПИ-1 b27
1. Успенский    Владимир    Иванович    19 ПИ-1 b28
1. Хорошилова   Марина  Александровна   19 ПИ-1 b29
1. Баранов  Илья    Андреевич   19 ПИ-2 b30
1. Бекусов  Михаил  Александрович   19 ПИ-2 b31
1. Бодров   Егор    Алексеевич  19 ПИ-2 b32
1. Бредихин Максим  Владимирович    19 ПИ-2 b33
1. Даняев   Артем   Андреевич   19 ПИ-2 b34
1. Дыряев   Даниил  Александрович   19 ПИ-2 b35
1. Зиганшин Никита  Русланович  19 ПИ-2 b36
1. Конина   Татьяна Дмитриевна  19 ПИ-2 b37
1. Костин   Андрей  Олегович    19 ПИ-2 b38
1. Мингбоев Худайберди  Абдухаким угли  19 ПИ-2 b39
1. Моисеев  Роман   Михайлович  19 ПИ-2 b40
1. Моничева Арина   Александровна   19 ПИ-1 b41
1. Мушка    Никита  Андреевич   19 ПИ-2 b42
1. Николаев Иван    Александрович   19 ПИ-2 b43
1. Ожиганова    Полина  Максимовна  19 ПИ-2 b44
1. Рыжова   Ирина   Игоревна    19 ПИ-2 b45
1. Салахов  Рамазан Маратович   19 ПИ-2 b46
1. Семаев   Никита  Юрьевич 19 ПИ-2 b47
1. Скугаревский Александр   Сергеевич   19 ПИ-2 b48
1. Столбов  Ярослав Владиславович   19 ПИ-2 b49
1. Таценко  Алексей Михайлович  19 ПИ-1 b50
1. Таценко  Илья    Михайлович  19 ПИ-1 b51
1. Тюлин    Игорь   Викторович  19 ПИ-2 b52
1. Фатин    Максим  Романович   19 ПИ-2 b53
1. Хорошавина   Екатерина   Андреевна   19 ПИ-2 b54
1. Цветков  Дмитрий Алексеевич  19 ПИ-2 b55
1. Шарунов  Евгений Александрович   19 ПИ-2 b56
1. Шатилов  Виктор  Алексеевич  19 ПИ-2 b57
1. Широков  Александр   Анатольевич 19 ПИ-2 b58
1. Стифеев  Никита  Андреевич   19 ПИ-2 b59
1. Малинин  Дмитрий Дмитриевич  19 ПМИ-2 b60
1. Бакланов Алексей Александрович   19 ПМИ-2 b61
1. Баринов  Даниил  Сергеевич   19 ПМИ-1 b62
1. Богомазов    Михаил  Васильевич  19 ПМИ-1 b63
1. Бугров   Лев Валерьевич  19 ПМИ-1 b64
1. Бузанов  Егор    Андреевич   19 ПМИ-1 b65
1. Варлачёв Валерий Максимович  19 ПМИ-1 b66
1. Голованов    Денис   Максимович  19 ПМИ-1 b67
1. Дробот   Елизавета   Денисовна   19 ПМИ-1 b68
1. Жаравина Полина  Дмитриевна  19 ПМИ-1 b69
1. Зайцев   Тимур   Олегович    19 ПМИ-1 b70
1. Кабанов  Денис   Сергеевич   19 ПМИ-1 b71
1. Канев    Владислав   Олегович    19 ПМИ-1 b72
1. Карцева  Мария   Дмитриевна  19 ПМИ-1 b73
1. Касьянов Никита  Юрьевич 19 ПМИ-1 b74
1. Козлова  Дарья   Андреевна   19 ПМИ-1 b75
1. Кузнецов Михаил  Дмитриевич  19 ПМИ-1 b76
1. Лавров   Артём   Романович   19 ПМИ-1 b77
1. Матвеев  Андрей  Сергеевич   19 ПМИ-1 b78
1. Машанова Карина  Алексеевна  19 ПМИ-1 b79
1. Наумов   Никита  Александрович   19 ПМИ-1 b80
1. Нещеткин Глеб    Максимович  19 ПМИ-1 b81
1. Пасманик Ирина   Дмитриевна  19 ПМИ-1 b82
1. Рогозян  Анастасия   Тимофеевна  19 ПМИ-1 b83
1. Соболев  Данил   Александрович   19 ПМИ-1 b84
1. Софронов Валерий Александрович   19 ПМИ-1 b85
1. Трутнев  Алексей Игоревич    19 ПМИ-1 b86
1. Тумаков  Вадим   Сергеевич   19 ПМИ-1 b87
1. Фролова  Ольга   Михайловна  19 ПМИ-1 b88
1. Шарибжанова  Диана   Рашидовна   19 ПМИ-1 b89
1. Щеникова Анна    Юрьевна 19 ПМИ-1 b90
1. Андросов Вадим   Дмитриевич  19 ПМИ-2 b91
1. Бирина   Елизавета   Сергеевна   19 ПМИ-2 b92
1. Булатов  Дмитрий Александрович   19 ПМИ-2 b93
1. Демашов  Никита  Александрович   19 ПМИ-2 b94
1. Добряев  Иван    Александрович   19 ПМИ-2 b95
1. Дрожжачих    Евгений Валерьевич  19 ПМИ-2 b96
1. Егорова  Кристина    Олеговна    19 ПМИ-2 b97
1. Загоскин Владислав   Андреевич   19 ПМИ-2 b98
1. Зарубина Ирина   Михайловна  19 ПМИ-2 b99
1. Иванов   Даниил  Андреевич   19 ПМИ-2 b100
1. Клыков   Антон   Романович   19 ПМИ-2 b101
1. Королев  Денис   Витальевич  19 ПМИ-2 b102
1. Краюшкина    Екатерина   Алексеевна  19 ПМИ-2 b103
1. Назаров  Вячеслав    Андреевич   19 ПМИ-2 b104
1. Оленев   Дмитрий Сергеевич   19 ПМИ-2 b105
1. Панина   Полина  Сергеевна   19 ПМИ-2 b106
1. Прыгаев  Денис   Алексеевич  19 ПМИ-2 b107
1. Рогов    Андрей  Дмитриевич  19 ПМИ-2 b108
1. Симонова Арина   Валерьевна  19 ПМИ-2 b109
1. Созинов  Кирилл  Игоревич    19 ПМИ-2 b110
1. Титова   Нина    Ивановна    19 ПМИ-2 b111
1. Уртюков  Илья    Алексеевич  19 ПМИ-2 b112
1. Хорев    Егор    Алексеевич  19 ПМИ-2 b113
1. Шабаршин Леонид  Георгиевич  19 ПМИ-2 b114



## Алгоритм выполнения работы

Для выполнения работы необходимо:

1. Выполнить *fork* репозитария в свой аккаунт.
1. Выполнить клонирование репозитария из своего аккаунта к себе на локальную машину (`git clone`).
1. Создать ветку **git** с индивидуальным номером (`git branch имя_ветки`).
1. Сделать ветку активной (`git checkout имя`).
1. Необходимо разместить как исходные файлы с решениями задач, поместив **cpp** файлы в **src**, а заголовочные - в **include**. 
1. Добавить файлы в хранилище (`git add`).
1. Выполнить фиксацию изменений (`git commit -m "комментарий"`).
1. Отправить содержимое ветки в свой удаленный репозитарий (`git push origin имя_ветки`).
1. Создать пул-запрос в репозитарий группы и ждать результата от **GitHub Actions**.


